<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STUDENT TIME TABLE</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --warning: #f72585;
            --info: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            --transition: all 0.2s ease;
            --body-bg: #f5f7ff;
            --card-bg: #ffffff;
            --text-color: #212529;
            --border-color: #e9ecef;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--body-bg);
            color: var(--text-color);
            line-height: 1.5;
            padding: 15px;
            min-height: 100vh;
            font-size: 0.9rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: var(--white);
            padding: 20px 25px;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .logo i {
            font-size: 1.8rem;
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 50%;
        }

        h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 400;
        }

        /* Main Content */
        .main-content {
            padding: 20px;
        }

        /* Controls Section */
        .controls {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: end;
        }

        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-label {
            font-weight: 600;
            color: var(--dark);
            font-size: 0.8rem;
        }

        .filter-input, .filter-select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.85rem;
            transition: var(--transition);
            background: var(--white);
        }

        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--light-gray);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: var(--gray);
            color: var(--white);
        }

        /* View Toggle */
        .view-toggle {
            display: flex;
            background: var(--light);
            border-radius: 8px;
            padding: 6px;
            margin-bottom: 20px;
            gap: 6px;
        }

        .view-btn {
            flex: 1;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: transparent;
            color: var(--gray);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .view-btn.active {
            background: var(--primary);
            color: var(--white);
        }

        /* Timetable Styles */
        .timetable-container {
            background: var(--white);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        .timetable {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .timetable th {
            background: var(--light);
            padding: 12px 8px;
            font-weight: 600;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            color: var(--dark);
        }

        .timetable .time-header {
            background: var(--primary);
            color: var(--white);
            width: 100px;
            font-size: 0.8rem;
        }

        .timetable td {
            padding: 8px;
            border: 1px solid var(--border-color);
            vertical-align: top;
            transition: var(--transition);
            min-height: 60px;
        }

        .timetable td:hover {
            background: var(--light);
        }

        .time-slot {
            font-weight: 600;
            color: var(--primary);
            text-align: center;
            background: rgba(67, 97, 238, 0.05);
            font-size: 0.8rem;
        }

        /* Event Cards */
        .event {
            background: var(--white);
            border-left: 3px solid var(--primary);
            border-radius: 5px;
            padding: 6px 8px;
            margin-bottom: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
            font-size: 0.8rem;
        }

        .event:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        .event-course {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 2px;
            font-size: 0.8rem;
        }

        .event-details {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .event-lecturer, .event-venue {
            display: block;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Daily View Specific */
        .daily-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: var(--light);
            border-bottom: 1px solid var(--border-color);
        }

        .day-navigation {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .current-day {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark);
            min-width: 120px;
            text-align: center;
        }

        .nav-btn {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 6px 12px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
        }

        .nav-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Empty State */
        .empty-slot {
            text-align: center;
            color: var(--gray);
            font-size: 0.8rem;
            padding: 4px;
            font-style: italic;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .controls {
                grid-template-columns: 1fr;
            }
            
            .filters {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 0.85rem;
            }
            
            .header {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .filters {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .timetable {
                font-size: 0.8rem;
            }
            
            .timetable th, 
            .timetable td {
                padding: 6px 4px;
            }
            
            .daily-header {
                flex-direction: column;
                gap: 12px;
                text-align: center;
            }
            
            .event {
                padding: 4px 6px;
            }
        }

        @media (max-width: 480px) {
            .view-toggle {
                flex-direction: column;
            }
            
            .btn {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .timetable .time-header {
                width: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h1>UniTime Manager</h1>
                <p class="subtitle">Smart Timetable Management System</p>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Controls Section -->
            <div class="controls">
                <div class="filters">
                    <div class="filter-group">
                        <label class="filter-label">Search Course</label>
                        <input type="text" id="search-course" class="filter-input" placeholder="Course name...">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Search Lecturer</label>
                        <input type="text" id="search-lecturer" class="filter-input" placeholder="Lecturer name...">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Filter by Day</label>
                        <select id="filter-day" class="filter-select">
                            <option value="">All Days</option>
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                        </select>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="applyFilters()">
                        <i class="fas fa-filter"></i> Apply
                    </button>
                    <button class="btn btn-secondary" onclick="resetFilters()">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
            </div>

            <!-- View Toggle -->
            <div class="view-toggle">
                <button class="view-btn active" id="weekly-btn" onclick="toggleView('weekly')">
                    <i class="fas fa-calendar-week"></i> Weekly
                </button>
                <button class="view-btn" id="daily-btn" onclick="toggleView('daily')">
                    <i class="fas fa-calendar-day"></i> Daily
                </button>
            </div>

            <!-- Weekly View -->
            <div id="weekly-view" class="timetable-container">
                <table class="timetable">
                    <thead>
                        <tr>
                            <th class="time-header">Time</th>
                            <th>Mon</th>
                            <th>Tue</th>
                            <th>Wed</th>
                            <th>Thu</th>
                            <th>Fri</th>
                        </tr>
                    </thead>
                    <tbody id="weekly-tbody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Daily View -->
            <div id="daily-view" class="timetable-container" style="display: none;">
                <div class="daily-header">
                    <div class="day-navigation">
                        <button class="nav-btn" onclick="changeDay(-1)">
                            <i class="fas fa-chevron-left"></i> Prev
                        </button>
                        <div class="current-day" id="current-day">Monday</div>
                        <button class="nav-btn" onclick="changeDay(1)">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <button class="btn btn-primary" onclick="exportToPDF()">
                        <i class="fas fa-file-pdf"></i> Export
                    </button>
                </div>
                <table class="timetable">
                    <thead>
                        <tr>
                            <th class="time-header">Time</th>
                            <th>Schedule</th>
                        </tr>
                    </thead>
                    <tbody id="daily-tbody">
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Simplified sample data with fewer lessons
        const timetableData = {
            Monday: [
                { time: '07:30 - 08:30', course: 'DPG621S', code: 'DPG', lecturer: 'Mr. G.K Kapuire', venue: 'Room: D3/G/AUD 1(272)', type: 'Theory' },
                { time: '10:30 - 11:30', course: 'MCI521S', code: 'MCI', lecturer: 'MR.A. KACHEPA', venue: 'Room: D3/G/AUD 1(272)', type: 'Theory' },
                { time: '14:00 - 15:00', course: 'PRG510S', code: 'PRG', lecturer: 'MR. M.KALE', venue: 'Room: D3/G/AUD 1(272)', type: 'Theory' }
            ],
            Tuesday: [
                { time: '09:30 - 10:30', course: 'MCI521S', code: 'MCI', lecturer: 'MR Sebastian', venue: 'Room: D3/G/AUD 3(54)', type: 'Tutorial' },
                { time: '11:30 - 12:00', course: 'COA511S', code: 'COA', lecturer: 'MR. J. W. Silaa', venue: 'D3/LG/FCI lab9(25)', type: 'Practical' },
                { time: '15:00 - 16:00', course: 'DSA521S', code: 'DSA', lecturer: 'MR. N.Indongo', venue: 'Room: K7/G/114(40)ET', type: 'Practical' },
                { time: '16:00 - 17:00', course: 'PRG510S', code: 'PRG', lecturer: 'MR. M.KALE', venue: 'Room: D3/G/AUD 1(272)', type: 'Theory' }
            
            ],
            Wednesday: [
                { time: '07:30 - 08:30', course: 'MCI521S', code: 'MCI', lecturer: 'MR Sebastian', venue: 'Room: D3/G/AUD 3(54)', type: 'Tutorial' },
                { time: '09:30 - 10:30', course: 'COA511S', code: 'COA', lecturer: 'MR. J. W. Silaa', venue: 'D3/LG/FCI lab9(25)', type: 'Practical' },
                { time: '14:00 - 15:00', course: 'DSA521S', code: 'DSA', lecturer: 'MR. N.Indongo', venue: 'Room: K7/G/114(40)ET', type: 'Practical' },
                { time: '15:00 - 16:00', course: 'PRG510S', code: 'PRG', lecturer: 'MR. M.KALE', venue: 'Room: D3/G/AUD 1(272)', type: 'Theory' }
            
            ],
            Thursday: [
                { time: '10:30 - 11:30', course: 'DPG621S', code: 'DPG', lecturer: 'Mr. M.Kasaona', venue: 'Room: A17/1/FCI LAB7(23)', type: 'Theory' },
                { time: '13:00 - 14:00', course: 'MCI521S', code: 'MCI', lecturer: 'MR. Sebastian', venue: 'Room: D3/G/AUD 3(54))', type: 'Theory' },
                { time: '16:00 - 15:00', course: 'PRG510S', code: 'PRG', lecturer: 'MR. M.KALE', venue: 'Room: A17/1/FCI LAB1(28)', type: 'Theory' }
            ],
            Friday: [
                { time: '10:30 - 11:30', course: 'EPR511S', code: 'EPR511S', lecturer: 'Mr.LB Kamwi', venue: 'Room: A17/1/LL1(35)', type: 'meeting' }
            ]
        };

        let currentView = 'weekly';
        let currentDayIndex = 0;
        const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];
        let filteredData = JSON.parse(JSON.stringify(timetableData)); // Copy of original data for filtering

        // Initialize the timetable
        document.addEventListener('DOMContentLoaded', function() {
            renderWeeklyView();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Real-time filtering as user types
            document.getElementById('search-course').addEventListener('input', applyFilters);
            document.getElementById('search-lecturer').addEventListener('input', applyFilters);
            document.getElementById('filter-day').addEventListener('change', applyFilters);
        }

        function toggleView(view) {
            currentView = view;
            
            document.getElementById('weekly-btn').classList.toggle('active', view === 'weekly');
            document.getElementById('daily-btn').classList.toggle('active', view === 'daily');
            
            document.getElementById('weekly-view').style.display = view === 'weekly' ? 'block' : 'none';
            document.getElementById('daily-view').style.display = view === 'daily' ? 'block' : 'none';
            
            if (view === 'daily') {
                renderDailyView(days[currentDayIndex]);
            } else {
                renderWeeklyView();
            }
        }

        function renderWeeklyView(data = filteredData) {
            const tbody = document.getElementById('weekly-tbody');
            tbody.innerHTML = '';
            
            const timeSlots = generateTimeSlots();
            
            timeSlots.forEach(slot => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="time-slot">${slot}</td>`;
                
                days.forEach(day => {
                    const cell = document.createElement('td');
                    const events = data[day]?.filter(event => event.time === slot) || [];
                    
                    if (events.length > 0) {
                        events.forEach(event => {
                            const eventElement = createEventElement(event);
                            cell.appendChild(eventElement);
                        });
                    } else {
                        cell.innerHTML = '<div class="empty-slot">-</div>';
                    }
                    
                    row.appendChild(cell);
                });
                
                tbody.appendChild(row);
            });
        }

        function renderDailyView(day, data = filteredData[day] || []) {
            document.getElementById('current-day').textContent = day;
            const tbody = document.getElementById('daily-tbody');
            tbody.innerHTML = '';
            
            const timeSlots = generateTimeSlots();
            
            timeSlots.forEach(slot => {
                const row = document.createElement('tr');
                row.innerHTML = `<td class="time-slot">${slot}</td>`;
                
                const cell = document.createElement('td');
                const events = data.filter(event => event.time === slot);
                
                if (events.length > 0) {
                    events.forEach(event => {
                        const eventElement = createEventElement(event);
                        cell.appendChild(eventElement);
                    });
                } else {
                    cell.innerHTML = '<div class="empty-slot">No classes scheduled</div>';
                }
                
                row.appendChild(cell);
                tbody.appendChild(row);
            });
        }

        function createEventElement(event) {
            const eventDiv = document.createElement('div');
            eventDiv.className = 'event';
            eventDiv.innerHTML = `
                <div class="event-course">${event.course}</div>
                <div class="event-details">
                    <div class="event-lecturer">${event.lecturer}</div>
                    <div class="event-venue">${event.venue}</div>
                </div>
            `;
            
            eventDiv.addEventListener('click', () => showEventDetails(event));
            
            return eventDiv;
        }

        function showEventDetails(event) {
            alert(`Course: ${event.course} (${event.code})\nLecturer: ${event.lecturer}\nVenue: ${event.venue}\nTime: ${event.time}\nType: ${event.type}`);
        }

        function generateTimeSlots() {
            // Custom time slots with lunch break
            return [
                '07:30 - 08:30',
                '08:30 - 09:30',
                '09:30 - 10:30',
                '10:30 - 11:30',
                '11:30 - 12:30',
                '13:00 - 14:00',  // Starts at 1:00 PM after lunch break
                '14:00 - 15:00',
                '15:00 - 16:00',
                '16:00 - 17:00'
            ];
        }

        function changeDay(direction) {
            currentDayIndex = (currentDayIndex + direction + days.length) % days.length;
            renderDailyView(days[currentDayIndex]);
        }

        function applyFilters() {
            const courseQuery = document.getElementById('search-course').value.toLowerCase();
            const lecturerQuery = document.getElementById('search-lecturer').value.toLowerCase();
            const dayFilter = document.getElementById('filter-day').value;

            // Reset filtered data to original
            filteredData = JSON.parse(JSON.stringify(timetableData));

            // Apply filters
            Object.keys(filteredData).forEach(day => {
                if (dayFilter && day !== dayFilter) {
                    // Remove days that don't match the filter
                    delete filteredData[day];
                } else {
                    // Filter events within the day
                    filteredData[day] = filteredData[day].filter(event => {
                        const matchesCourse = !courseQuery || 
                            event.course.toLowerCase().includes(courseQuery) ||
                            event.code.toLowerCase().includes(courseQuery);
                        
                        const matchesLecturer = !lecturerQuery || 
                            event.lecturer.toLowerCase().includes(lecturerQuery);
                        
                        return matchesCourse && matchesLecturer;
                    });
                }
            });

            // Re-render the current view with filtered data
            if (currentView === 'weekly') {
                renderWeeklyView(filteredData);
            } else {
                const currentDay = days[currentDayIndex];
                if (filteredData[currentDay]) {
                    renderDailyView(currentDay, filteredData[currentDay]);
                } else {
                    // If filtered day has no data, show empty
                    renderDailyView(currentDay, []);
                }
            }
            
            showNotification('Filters applied successfully!');
        }

        function resetFilters() {
            document.getElementById('search-course').value = '';
            document.getElementById('search-lecturer').value = '';
            document.getElementById('filter-day').value = '';
            
            // Reset filtered data to original
            filteredData = JSON.parse(JSON.stringify(timetableData));
            
            if (currentView === 'weekly') {
                renderWeeklyView();
            } else {
                renderDailyView(days[currentDayIndex]);
            }
            
            showNotification('Filters reset successfully!');
        }

        function exportToPDF() {
            showNotification('Preparing PDF export...');
            // In a real implementation, this would generate a PDF
            setTimeout(() => {
                showNotification('PDF exported successfully!');
            }, 1500);
        }

        function showNotification(message) {
            // Remove existing notification
            const existingNotification = document.querySelector('.notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // Create new notification
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>